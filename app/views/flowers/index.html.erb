<% if user_signed_in? %>
  <h3><%= current_user.name %>のページ</h3>
<% end %>
<% if current_user.try(:admin?) %>
  <h1>Flowers_admin</h1>
<% else %>
  <h1>Flowers</h1>
<% end %>

<%= render 'search', q: @q, url: flowers_path %>

<table>
  <thead>
    <tr>
      <th>投稿者</th>
      <th>Name</th>
      <th>Description</th>
      <th>Image</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @flowers.each do |flower| %>
      <tr>
        <td><%= flower.favorite_users.name %></td>
        <td><%= flower.name %></td>
        <td><%= flower.description %></td>
        <td><% if flower.image.attached? %>
          <%= image_tag flower.image.variant(resize_to_limit: [200, 200]) %>
        <% end %></td>
        <td><%= link_to 'Show', flower %></td>
        <td><%= link_to 'Edit', edit_flower_path(flower) %></td>
        <td><%= link_to 'Destroy', flower, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Flower', new_flower_path %>
